# 提案：优化视口平移逻辑 - 减少不必要的横向移动

## 摘要
优化视口跟随逻辑，避免在同一行内生成新内容时发生不必要的横向视口移动。仅当新内容超出安全视口边缘时，才触发视口调整。

## 问题
当前逻辑中，只要新内容生成，系统就会尝试将“当前视口 + 新内容”的联合包围盒居中显示（或在最小缩放时平移对齐）。这意味着即使新内容完全在当前视野内（只是向右增加），视口也会为了“重新居中”而发生微小的横向移动，这造成了视觉上的不稳定。

## 解决方案
在 `MainLayout.tsx` 的视口逻辑中增加“是否完全可见”的预判：

1. **检测可见性**：判断新生成的画板是否完全位于当前 Safe Viewport（考虑缩放后的页面坐标）内。
2. **分支处理**：
   - **完全可见 (Inside)**: **不移动视口**（保持稳定）。
   - **超出视口 (Outside)**:
     - 如果在同一行向右扩展且仅右侧超出 -> 仅向右扩展视口（缩放或平移），垂直方向保持稳定（如果可能）。
     - 实际上，现有的 "Union Bounds" 逻辑已经处理了“包含”，但我们需要确保如果联合包围盒本来就在视野内，就不应该动。
     - **关键修正**: 现有的 `isInside` 检查可能存在问题，或者后续的 `setCamera` 逻辑过于激进地想要“居中”联合包围盒。我们应该改为：如果需要移动，尽量只移动必要的部分，或者维持“居中”逻辑但确保前提是“确实需要移动”。

## 修正方案 (Refined)
用户指出：“横向同一行内生成的时候，没有触碰到安全视口的边缘，则应该保持视口稳定”。

我们需要严格执行 `isInside` 检查。如果 `isInside` 为真，则直接 `return`，不执行 `setCamera`。

目前的 `MainLayout.tsx` 似乎已经有了 `if (isInside)` 分支，但可能判断条件有误，或者 `safeArea` 的定义导致即便在屏幕内也被判定为 outside。

我们将：
1. 审查并修正 `isInside` 的判定逻辑，确保它正确计算了 Safe Area 在 Page 空间的坐标。
2. 确保当 `isInside` 为真时，跳过所有 `setCamera` 调用。

## 影响
- **UX**: 提升连续生成时的视觉稳定性。
- **Code**: `MainLayout.tsx`。
